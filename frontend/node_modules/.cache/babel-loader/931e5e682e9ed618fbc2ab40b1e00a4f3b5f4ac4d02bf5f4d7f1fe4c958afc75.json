{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Box,Card,CardContent,Typography,Grid,CircularProgress}from'@mui/material';import{Computer as ComputerIcon,Person as PersonIcon,AttachMoney as MoneyIcon,Timer as TimerIcon}from'@mui/icons-material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Statistics=()=>{const[stats,setStats]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchStatistics=async()=>{try{const response=await fetch('/api/statistics');if(!response.ok){throw new Error('Не удалось загрузить статистику');}const data=await response.json();setStats(data);}catch(err){setError(err instanceof Error?err.message:'Произошла ошибка');}finally{setLoading(false);}};fetchStatistics();},[]);if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"200px\",children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(error){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"200px\",children:/*#__PURE__*/_jsx(Typography,{color:\"error\",children:error})});}const statCards=[{title:'Всего компьютеров',value:(stats===null||stats===void 0?void 0:stats.total_computers)||0,icon:/*#__PURE__*/_jsx(ComputerIcon,{sx:{fontSize:40}}),color:'#1976d2'},{title:'Активных пользователей',value:(stats===null||stats===void 0?void 0:stats.active_users)||0,icon:/*#__PURE__*/_jsx(PersonIcon,{sx:{fontSize:40}}),color:'#2e7d32'},{title:'Выручка за день',value:`${(stats===null||stats===void 0?void 0:stats.daily_revenue)||0}₽`,icon:/*#__PURE__*/_jsx(MoneyIcon,{sx:{fontSize:40}}),color:'#ed6c02'},{title:'Среднее время сессии',value:`${(stats===null||stats===void 0?void 0:stats.average_session_time)||0} мин`,icon:/*#__PURE__*/_jsx(TimerIcon,{sx:{fontSize:40}}),color:'#9c27b0'}];return/*#__PURE__*/_jsxs(Box,{sx:{flexGrow:1,p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u043A\\u043B\\u0443\\u0431\\u0430\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:statCards.map((card,index)=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{sx:{height:'100%',display:'flex',flexDirection:'column','&:hover':{transform:'translateY(-4px)',boxShadow:3,transition:'all 0.3s'}},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Box,{sx:{backgroundColor:`${card.color}15`,borderRadius:'50%',p:1,mr:2,color:card.color},children:card.icon}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"div\",sx:{fontWeight:'bold',color:'text.primary'},children:card.value})]}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"text.secondary\",children:card.title})]})})},index))})]});};export default Statistics;","map":{"version":3,"names":["React","useEffect","useState","Box","Card","CardContent","Typography","Grid","CircularProgress","Computer","ComputerIcon","Person","PersonIcon","AttachMoney","MoneyIcon","Timer","TimerIcon","jsx","_jsx","jsxs","_jsxs","Statistics","stats","setStats","loading","setLoading","error","setError","fetchStatistics","response","fetch","ok","Error","data","json","err","message","display","justifyContent","alignItems","minHeight","children","color","statCards","title","value","total_computers","icon","sx","fontSize","active_users","daily_revenue","average_session_time","flexGrow","p","variant","gutterBottom","container","spacing","map","card","index","item","xs","sm","md","height","flexDirection","transform","boxShadow","transition","mb","backgroundColor","borderRadius","mr","component","fontWeight"],"sources":["C:/Users/USER/Desktop/PC_CLUB/frontend/src/components/Statistics.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { \r\n  Box, \r\n  Card, \r\n  CardContent, \r\n  Typography, \r\n  Grid,\r\n  CircularProgress\r\n} from '@mui/material';\r\nimport {\r\n  Computer as ComputerIcon,\r\n  Person as PersonIcon,\r\n  AttachMoney as MoneyIcon,\r\n  Timer as TimerIcon\r\n} from '@mui/icons-material';\r\n\r\ninterface StatisticsData {\r\n  total_computers: number;\r\n  active_users: number;\r\n  daily_revenue: number;\r\n  average_session_time: number;\r\n}\r\n\r\nconst Statistics: React.FC = () => {\r\n  const [stats, setStats] = useState<StatisticsData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchStatistics = async () => {\r\n      try {\r\n        const response = await fetch('/api/statistics');\r\n        if (!response.ok) {\r\n          throw new Error('Не удалось загрузить статистику');\r\n        }\r\n        const data = await response.json();\r\n        setStats(data);\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Произошла ошибка');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStatistics();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"200px\">\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"200px\">\r\n        <Typography color=\"error\">{error}</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const statCards = [\r\n    {\r\n      title: 'Всего компьютеров',\r\n      value: stats?.total_computers || 0,\r\n      icon: <ComputerIcon sx={{ fontSize: 40 }} />,\r\n      color: '#1976d2'\r\n    },\r\n    {\r\n      title: 'Активных пользователей',\r\n      value: stats?.active_users || 0,\r\n      icon: <PersonIcon sx={{ fontSize: 40 }} />,\r\n      color: '#2e7d32'\r\n    },\r\n    {\r\n      title: 'Выручка за день',\r\n      value: `${stats?.daily_revenue || 0}₽`,\r\n      icon: <MoneyIcon sx={{ fontSize: 40 }} />,\r\n      color: '#ed6c02'\r\n    },\r\n    {\r\n      title: 'Среднее время сессии',\r\n      value: `${stats?.average_session_time || 0} мин`,\r\n      icon: <TimerIcon sx={{ fontSize: 40 }} />,\r\n      color: '#9c27b0'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <Box sx={{ flexGrow: 1, p: 3 }}>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Статистика клуба\r\n      </Typography>\r\n      <Grid container spacing={3}>\r\n        {statCards.map((card, index) => (\r\n          <Grid item xs={12} sm={6} md={3} key={index}>\r\n            <Card \r\n              sx={{ \r\n                height: '100%',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                '&:hover': {\r\n                  transform: 'translateY(-4px)',\r\n                  boxShadow: 3,\r\n                  transition: 'all 0.3s'\r\n                }\r\n              }}\r\n            >\r\n              <CardContent>\r\n                <Box \r\n                  sx={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    mb: 2\r\n                  }}\r\n                >\r\n                  <Box \r\n                    sx={{\r\n                      backgroundColor: `${card.color}15`,\r\n                      borderRadius: '50%',\r\n                      p: 1,\r\n                      mr: 2,\r\n                      color: card.color\r\n                    }}\r\n                  >\r\n                    {card.icon}\r\n                  </Box>\r\n                  <Typography \r\n                    variant=\"h4\" \r\n                    component=\"div\"\r\n                    sx={{ \r\n                      fontWeight: 'bold',\r\n                      color: 'text.primary'\r\n                    }}\r\n                  >\r\n                    {card.value}\r\n                  </Typography>\r\n                </Box>\r\n                <Typography \r\n                  variant=\"subtitle1\" \r\n                  color=\"text.secondary\"\r\n                >\r\n                  {card.title}\r\n                </Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Statistics; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}